

# 💯💯💯 一、函数定义（Function Definition）

**语法结构：**

```dart
返回类型 函数名(参数列表) {
  // 函数体
  return 返回值;
}
```

**示例：**

```dart
int add(int a, int b) {
  return a + b;
}

void main() {
  print(add(2, 3)); // 5
}
```

📘 **要点：**

* 返回类型可以省略，Dart 会自动推断类型。
* 如果没有返回值，建议显式写 `void`。

---

# 💯💯💯 二、参数类型（Parameters）⭐（重点）

> ### 1️⃣ 必需的位置参数

调用时必须**按顺序**传入所有参数。

```dart
void greet(String name, int age) {
  print('Hello $name, age $age');
}

greet('Alice', 18);
```

---

> ### 2️⃣ 可选的位置参数 `[]`

调用时可以选择传递或不传递，未传入时为 `null` 或**默认值**

```dart
void greet([String? name]) {
  print('Hello ${name ?? "Guest"}');
}

greet(); // Hello Guest
greet('Bob'); // Hello Bob
```

---

> ### 3️⃣ 可选的命名参数 `{}`

命名参数可以按名称传递，不要求顺序。

```dart
void greet({String? name, int? age}) {
  print('Hello $name, age $age');
}

greet(name: 'Alice', age: 20);
```

---

> ### 4️⃣ `required` 关键字

使命名参数变为**必传参数**。

```dart
void greet({required String name, int age = 18}) {
  print('Hello $name, age $age');
}

greet(name: 'Bob'); // ✅ 必传 name，否则报错
```

---

> ### 5️⃣ 参数默认值

```dart
void greet({String name = 'Guest', int age = 18}) {
  print('Hello $name, age $age');
}

greet(); // Hello Guest, age 18
```

---

# 💯💯💯 三、箭头函数（Arrow Function）

箭头函数（`=>`）是单表达式函数的简写形式，适合简短逻辑。

```dart
int add(int a, int b) => a + b;

void main() => print(add(2, 3)); // 5
```

📘 **要点：**

* `=>` 只能用于**单个表达式**；
* 自动返回表达式的值；
* 相当于：

  ```dart
  int add(int a, int b) {
    return a + b;
  }
  ```

---

# 💯💯💯 四、匿名函数（Anonymous Function / Lambda）

没有函数名的函数，用于：

* 作为回调；
* 临时逻辑；
* 参数传递。

```dart
var numbers = [1, 2, 3];
numbers.forEach((n) {
  print(n * 2);
});
```

或使用箭头函数简写：

```dart
numbers.forEach((n) => print(n * 2));
```

---

# 💯💯💯 五、闭包（Closures）

闭包可以“捕获”外部变量的值，使其在函数调用后仍然存在。

```dart
Function makeCounter() {
  int count = 0;
  return () {
    count++;
    print(count);
  };
}

void main() {
  var counter = makeCounter();
  counter(); // 1
  counter(); // 2
}
```

📘 **要点：**

* 闭包 = 函数 + 外部环境；
* 常用于计数器、缓存、事件处理等场景。

---

# 💯💯💯 六、函数作为对象（First-Class Functions）

在 Dart 中，函数是一等对象（First-class citizen）：

* 可以赋值；
* 作为参数；
* 作为返回值。

```dart
void printMessage(String msg) => print(msg);

void execute(Function callback) {
  callback('Hello Dart!');
}

void main() {
  execute(printMessage); // Hello Dart!
}
```

---

# 💯💯💯 七、词法作用域（Lexical Scope）

作用域指变量在代码中的可见范围。
Dart 使用**词法作用域**：变量的作用范围由其在源代码中的位置决定。

```dart
void outer() {
  var outerVar = 'outer';
  void inner() {
    print(outerVar); // 可以访问外部变量
  }
  inner();
}
```

⚠️ 内部函数能访问外部作用域的变量，但外部不能访问内部作用域的变量。

---

## ✅ 八、总结表

| 概念           | 特点             | 示例                                    |
| ------------ | -------------- | ------------------------------------- |
| **函数定义**     | 普通函数，带返回值      | `int add(int a, int b)`               |
| **必需参数**     | 必须传入，按顺序       | `void greet(String name)`             |
| **可选位置参数**   | 可选参数，用 `[]` 包裹 | `void greet([String? name])`          |
| **可选命名参数**   | 可选参数，用 `{}` 包裹 | `void greet({String? name})`          |
| **required** | 命名参数强制必填       | `void greet({required String name})`  |
| **默认值**      | 参数未传入时使用默认值    | `void greet({String name = 'Guest'})` |
| **箭头函数**     | 单表达式简写         | `()=>表达式`                             |
| **匿名函数**     | 无名函数，常用于回调     | `(n) => print(n)`                     |
| **闭包**       | 捕获外部变量         | `makeCounter()`                       |
| **函数对象**     | 函数可赋值/传递       | `Function fn = add;`                  |
| **词法作用域**    | 静态作用域规则        | 内部函数可访问外部变量                           |