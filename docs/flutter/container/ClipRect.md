ä¸‹é¢æˆ‘ç»™ä½ ä¸€ä»½**ç³»ç»Ÿ + å®æˆ˜å¯¼å‘**çš„æ€»ç»“ï¼ŒæŠŠ **Flutter çš„ `ClipRect`** ä¸€æ¬¡è®²é€ï¼Œé€‚åˆä½ åšç»„ä»¶ç¬”è®°æˆ–ç›´æ¥å†™è¿›å­¦ä¹ æ–‡æ¡£é‡Œã€‚

---

## ä¸€ã€ClipRect æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¸€å¥è¯ç†è§£ï¼‰

**`ClipRect` ç”¨æ¥æŠŠå­ç»„ä»¶â€œè£å‰ªâ€åˆ°ä¸€ä¸ªçŸ©å½¢åŒºåŸŸå†…ï¼Œè¶…å‡ºéƒ¨åˆ†ç›´æ¥éšè—ã€‚**

> å®ƒ **ä¸è´Ÿè´£å¸ƒå±€ã€ä¸ç¼©æ”¾ã€ä¸æ”¹å˜å¤§å°**ï¼Œåªåšä¸€ä»¶äº‹ï¼š
> ğŸ‘‰ **è£å‰ªï¼ˆclipï¼‰**

---

## äºŒã€ä¸ºä»€ä¹ˆè¦ç”¨ ClipRectï¼Ÿï¼ˆè§£å†³ä»€ä¹ˆé—®é¢˜ï¼‰

ä½ åœ¨ Flutter å¼€å‘ä¸­ä¸€å®šé‡åˆ°è¿‡è¿™äº›æƒ…å†µï¼š

* å­ç»„ä»¶ **å†…å®¹æº¢å‡ºçˆ¶ç»„ä»¶**
* åŠ¨ç”»ä¸­æƒ³ **åªæ˜¾ç¤ºä¸€éƒ¨åˆ†**
* å›¾ç‰‡ / å®¹å™¨ **è¶…å‡ºè¾¹ç•Œä¸æƒ³æ˜¾ç¤º**
* æƒ³è¦ **çŸ©å½¢è£å‰ªï¼ˆä¸æ˜¯åœ†è§’ï¼‰**

è¿™æ—¶ `ClipRect` å°±éå¸¸åˆé€‚ã€‚

---

## ä¸‰ã€ClipRect çš„åŸºæœ¬ç”¨æ³•

### 1ï¸âƒ£ æœ€ç®€å•çš„ä¾‹å­

```dart
ClipRect(
  child: Container(
    width: 200,
    height: 200,
    color: Colors.blue,
    child: Align(
      alignment: Alignment.topLeft,
      child: Container(
        width: 300,
        height: 300,
        color: Colors.red,
      ),
    ),
  ),
)
```

**æ•ˆæœï¼š**

* çº¢è‰²å®¹å™¨è¶…å‡ºçš„éƒ¨åˆ† ğŸ‘‰ è¢«è£æ‰
* åªæ˜¾ç¤ºåœ¨çˆ¶çŸ©å½¢èŒƒå›´å†…çš„åŒºåŸŸ

![Image](https://i.sstatic.net/Ls8Bj.png)

![Image](https://i.sstatic.net/L9qxx.png)

---

## å››ã€ClipRect çš„æ ¸å¿ƒå±æ€§å¤§å…¨

### ğŸ§© æ„é€ å‡½æ•°

```dart
const ClipRect({
  Key? key,
  this.clipper,
  this.clipBehavior = Clip.hardEdge,
  Widget? child,
})
```

---

### 1ï¸âƒ£ childï¼ˆå­ç»„ä»¶ï¼‰

```dart
Widget? child
```

* è¦è¢«è£å‰ªçš„ç»„ä»¶
* **è£å‰ªä¸€å®šå‘ç”Ÿåœ¨ child ä¸Š**

---

### 2ï¸âƒ£ clipperï¼ˆè‡ªå®šä¹‰è£å‰ªåŒºåŸŸï¼‰â­ï¸é‡ç‚¹

```dart
CustomClipper<Rect>? clipper
```

* ç”¨æ¥ **è‡ªå®šä¹‰è£å‰ªçš„çŸ©å½¢åŒºåŸŸ**
* é»˜è®¤æ˜¯ï¼š**child è‡ªèº«çš„å¤§å°**

#### ç¤ºä¾‹ï¼šåªæ˜¾ç¤ºä¸­é—´åŒºåŸŸ

```dart
class MyRectClipper extends CustomClipper<Rect> {
  @override
  Rect getClip(Size size) {
    return Rect.fromLTWH(
      50,
      50,
      size.width - 100,
      size.height - 100,
    );
  }

  @override
  bool shouldReclip(oldClipper) => false;
}
```

ä½¿ç”¨ï¼š

```dart
ClipRect(
  clipper: MyRectClipper(),
  child: Image.asset('assets/test.png'),
)
```

ğŸ“Œ **å¸¸è§ç”¨é€”**

* å›¾ç‰‡å±€éƒ¨æ˜¾ç¤º
* åŠ¨ç”»è£å‰ªçª—å£
* æ¸¸æˆ / UI è§†çª—

---

### 3ï¸âƒ£ clipBehaviorï¼ˆè£å‰ªæ–¹å¼ / æ€§èƒ½ï¼‰â­ï¸é«˜é¢‘è€ƒç‚¹

```dart
Clip clipBehavior
```

å¯é€‰å€¼ï¼š

| å€¼                             | è¯´æ˜          |
| ----------------------------- | ----------- |
| `Clip.none`                   | âŒ ä¸è£å‰ªï¼ˆå‡ ä¹ä¸ç”¨ï¼‰ |
| `Clip.hardEdge`               | âœ… é»˜è®¤ï¼Œæ€§èƒ½æœ€å¥½   |
| `Clip.antiAlias`              | è¾¹ç¼˜å¹³æ»‘ï¼Œç¨è€—æ€§èƒ½   |
| `Clip.antiAliasWithSaveLayer` | æœ€è€—æ€§èƒ½ï¼Œä¸€èˆ¬ä¸ç”¨   |

#### é€‰å‹å»ºè®®ï¼ˆå¾ˆé‡è¦ï¼‰

âœ… **99% ç”¨ `Clip.hardEdge`**
âš ï¸ åœ†è§’ / å¤æ‚è¾¹ç¼˜æ‰è€ƒè™‘ antiAlias

---

## äº”ã€ClipRect çš„ç‰¹ç‚¹æ€»ç»“ï¼ˆå’Œä½ ä¸€å®šä¼šæ··æ·†çš„ç‚¹ï¼‰

### â— ClipRect ä¸ä¼šï¼š

* âŒ æ”¹å˜ child çš„å¤§å°
* âŒ å½±å“å¸ƒå±€
* âŒ è‡ªåŠ¨åŠ åœ†è§’
* âŒ è§£å†³ overflow æŠ¥é”™ï¼ˆåªè£å‰ªï¼Œä¸é˜»æ­¢å¸ƒå±€è®¡ç®—ï¼‰

---

## å…­ã€ClipRect vs å…¶ä»–è£å‰ªç»„ä»¶ï¼ˆå¿…ä¼šå¯¹æ¯”ï¼‰

| ç»„ä»¶           | è£å‰ªå½¢çŠ¶   | å¸¸ç”¨åœºæ™¯      |
| ------------ | ------ | --------- |
| **ClipRect** | çŸ©å½¢     | æº¢å‡ºè£å‰ªã€åŠ¨ç”»çª—å£ |
| ClipRRect    | åœ†è§’çŸ©å½¢   | åœ†è§’å¡ç‰‡ã€å¤´åƒ   |
| ClipOval     | æ¤­åœ† / åœ† | åœ†å½¢å¤´åƒ      |
| ClipPath     | ä»»æ„è·¯å¾„   | ä¸è§„åˆ™ UI    |

ğŸ“Œ **è®°å¿†å£è¯€**

> ç›´ â†’ ClipRect
> åœ†è§’ â†’ ClipRRect
> åœ† â†’ ClipOval
> è‡ªå®šä¹‰ â†’ ClipPath

---

## ä¸ƒã€å…¸å‹ä½¿ç”¨åœºæ™¯ï¼ˆå¼€å‘ä¸­å¾ˆå¸¸è§ï¼‰

### 1ï¸âƒ£ åŠ¨ç”»è£å‰ªï¼ˆå±•å¼€ / æ”¶èµ·ï¼‰

```dart
ClipRect(
  child: Align(
    heightFactor: animation.value,
    child: child,
  ),
)
```

ğŸ‘‰ Flutter å®˜æ–¹åŠ¨ç”»ç¤ºä¾‹å¸¸ç”¨å¥—è·¯

---

### 2ï¸âƒ£ å›¾ç‰‡è£å‰ªæ˜¾ç¤ºå±€éƒ¨

```dart
ClipRect(
  child: Align(
    alignment: Alignment.topCenter,
    heightFactor: 0.5,
    child: Image.network(url),
  ),
)
```

---

### 3ï¸âƒ£ Scroll / Stack ä¸­çš„è£å‰ª

* Stack å­ç»„ä»¶æº¢å‡º
* ListItem å†…éƒ¨åŠ¨ç”»

---

## å…«ã€æ€§èƒ½ä¸æ³¨æ„äº‹é¡¹ï¼ˆä½ ç°åœ¨é˜¶æ®µå¾ˆå…³é”®ï¼‰

### âœ… æ€§èƒ½å»ºè®®

* èƒ½ä¸ç”¨è£å‰ªå°±ä¸ç”¨
* èƒ½ç”¨ `hardEdge` å°±åˆ«ç”¨ `antiAlias`
* **åˆ—è¡¨ä¸­æ…ç”¨è£å‰ªï¼ˆå°¤å…¶æ˜¯ ClipPathï¼‰**

### â— å¸¸è§è¯¯åŒº

âŒ ä»¥ä¸º ClipRect ä¼šé™åˆ¶å¤§å°
âŒ ä»¥ä¸º ClipRect èƒ½æ›¿ä»£ SizedBox
âŒ è¿‡åº¦ä½¿ç”¨å¯¼è‡´æ€§èƒ½ä¸‹é™

---

## ä¹ã€ä¸€å¥è¯ç»ˆææ€»ç»“ï¼ˆä½ å¯ä»¥ç›´æ¥è®°ï¼‰

> **ClipRect æ˜¯ Flutter ä¸­æœ€è½»é‡çš„çŸ©å½¢è£å‰ªç»„ä»¶ï¼Œåªè£å‰ªã€ä¸å¸ƒå±€ã€ä¸ç¼©æ”¾ï¼Œå¸¸ç”¨äºæº¢å‡ºæ§åˆ¶å’ŒåŠ¨ç”»è£å‰ªã€‚**

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ä¸‹ä¸€æ­¥å¸®ä½ ï¼š

* ğŸ”¥ å†™ä¸€ä»½ **ClipRect / ClipRRect / ClipPath æºç çº§å¯¹æ¯”**
* ğŸ”¥ ç»“åˆ **åŠ¨ç”»ï¼ˆAnimatedBuilderï¼‰** åšå®Œæ•´è£å‰ªåŠ¨ç”»
* ğŸ”¥ å¸®ä½ æ•´ç†ä¸€å¼  **Flutter è£å‰ªç»„ä»¶è„‘å›¾**

ä½ ç°åœ¨æ›´æƒ³å¾€ **æºç ç†è§£** è¿˜æ˜¯ **å®æˆ˜åŠ¨ç”»** æ–¹å‘ç»§ç»­ï¼Ÿ
